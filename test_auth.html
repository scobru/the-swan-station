<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWAN STATION - AUTH TEST</title>
    <style>
        body {
            font-family: 'VT323', monospace;
            background-color: #000;
            color: #00ff00;
            margin: 0;
            padding: 20px;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .test-button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
            font-family: 'VT323', monospace;
            font-size: 16px;
        }

        .test-button:hover {
            background: #00cc00;
        }

        .log {
            background: #111;
            border: 1px solid #00ff00;
            padding: 10px;
            margin: 10px 0;
            min-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <div class="test-container">
        <h1>🦢 SWAN STATION - AUTH TEST</h1>

        <div>
            <button class="test-button" onclick="testAuthModule()">Test Auth Module</button>
            <button class="test-button" onclick="testShowAuthPrompt()">Test Show Auth Prompt</button>
            <button class="test-button" onclick="testModuleLoading()">Test Module Loading</button>
        </div>

        <div class="log" id="testLog">
            <p>Test log will appear here...</p>
        </div>
    </div>

    <script>
        function log(message) {
            const logElement = document.getElementById('testLog');
            const timestamp = new Date().toLocaleTimeString();
            logElement.innerHTML += `<p>[${timestamp}] ${message}</p>`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function testModuleLoading() {
            log("Testing module loading...");

            const modules = ['core', 'ui', 'auth', 'timer', 'stats', 'operators', 'tasks', 'chat', 'challenges', 'main'];

            modules.forEach(module => {
                if (window[module]) {
                    log(`✅ ${module} module loaded`);
                } else {
                    log(`❌ ${module} module NOT loaded`);
                }
            });
        }

        function testAuthModule() {
            log("Testing auth module...");

            if (window.auth) {
                log("✅ Auth module found");

                if (typeof window.auth.showAuthPrompt === 'function') {
                    log("✅ showAuthPrompt function available");
                } else {
                    log("❌ showAuthPrompt function NOT available");
                }

                if (typeof window.auth.performLogin === 'function') {
                    log("✅ performLogin function available");
                } else {
                    log("❌ performLogin function NOT available");
                }

                if (typeof window.auth.performSignup === 'function') {
                    log("✅ performSignup function available");
                } else {
                    log("❌ performSignup function NOT available");
                }

                if (typeof window.auth.showPairLoginModal === 'function') {
                    log("✅ showPairLoginModal function available");
                } else {
                    log("❌ showPairLoginModal function NOT available");
                }
            } else {
                log("❌ Auth module NOT found");
            }

            // Test shogun-core availability
            if (window.core && window.core.shogun) {
                log("✅ Shogun Core available");

                if (typeof window.core.shogun.login === 'function') {
                    log("✅ Shogun login function available");
                } else {
                    log("❌ Shogun login function NOT available");
                }

                if (typeof window.core.shogun.signUp === 'function') {
                    log("✅ Shogun signUp function available");
                } else {
                    log("❌ Shogun signUp function NOT available");
                }

                if (typeof window.core.shogun.isLoggedIn === 'function') {
                    log("✅ Shogun isLoggedIn function available");
                } else {
                    log("❌ Shogun isLoggedIn function NOT available");
                }
            } else {
                log("❌ Shogun Core NOT available");
            }
        }

        function testShowAuthPrompt() {
            log("Testing showAuthPrompt...");

            try {
                if (window.auth && window.auth.showAuthPrompt) {
                    window.auth.showAuthPrompt();
                    log("✅ showAuthPrompt called successfully");
                    log("📝 New authentication system should show:");
                    log("   - Username and password fields");
                    log("   - Login and Signup buttons");
                    log("   - Pair login option");
                } else {
                    log("❌ showAuthPrompt not available");
                }
            } catch (error) {
                log(`❌ Error calling showAuthPrompt: ${error.message}`);
            }
        }

        // Auto-test on load
        window.addEventListener('load', () => {
            log("Page loaded, running auto-test...");
            setTimeout(() => {
                testModuleLoading();
                testAuthModule();
            }, 1000);
        });
    </script>

    <!-- Load the modular script -->
    <script src="src/script_new.js"></script>
</body>

</html>